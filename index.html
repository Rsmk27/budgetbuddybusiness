<!DOCTYPE html>
<html lang="en" class="light-mode">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Budget Buddy</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style type="text/tailwindcss">
        /* Custom styles and colors for the app */
        @layer base {
            :root {
                --primary: #2563EB; /* Indigo */
                --secondary: #A78BFA; /* Lavender (for secondary insights) */
                --positive: #10B981; /* Emerald */
                --negative: #DC2626; /* Crimson */
                --warning: #F59E0B; /* Golden Amber */
                --bg-light: #F9FAFB; /* Off-White */
                --bg-dark: #1f2937; /* gray-800 */
                --text-light: #111827; /* Charcoal */
                --text-secondary: #475569; /* Slate Gray */
                --text-dark: #f9fafb; /* gray-50 */
                --card-light: #E5E7EB; /* Light Gray */
                --card-dark: #374151; /* gray-700 */
                --border-light: #e5e7eb; /* gray-200 */
                --border-dark: #4b5563; /* gray-600 */
            }
            .light-mode {
                --bg-color: var(--bg-light);
                --text-color: var(--text-light);
                --card-color: var(--card-light);
                --border-color: var(--border-light);
            }
            .dark-mode {
                --bg-color: var(--bg-dark);
                --text-color: var(--text-dark);
                --card-color: var(--card-dark);
                --border-color: var(--border-dark);
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chart.js and Datalabels Plugin -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <!-- html2pdf.js for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body class="bg-[--bg-color] text-[--text-color] font-[Inter] transition-colors duration-300">

    <!-- Main App Container -->
    <div class="flex flex-col md:flex-row min-h-screen">

        <!-- Sidebar Navigation -->
        <aside class="bg-[--card-color] p-6 shadow-lg md:w-64 flex-shrink-0 flex flex-col justify-between">
            <div>
                <div class="text-xl font-bold text-[--primary] mb-8" data-lang-key="appName">Business Budget Buddy</div>
                <div class="text-xs text-[--text-secondary] mb-4" id="userIdDisplay"></div>
                <nav>
                    <ul>
                        <li class="nav-item mb-2">
                            <a href="#dashboard" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer" data-page="dashboard">
                                <i class="fas fa-tachometer-alt"></i>
                                <span data-lang-key="dashboard">Dashboard</span>
                            </a>
                        </li>
                        <li class="nav-item mb-2">
                            <a href="#income" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer" data-page="income">
                                <i class="fas fa-hand-holding-usd"></i>
                                <span data-lang-key="income">Income</span>
                            </a>
                        </li>
                        <li class="nav-item mb-2">
                            <a href="#expenses" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer" data-page="expenses">
                                <i class="fas fa-money-bill-wave"></i>
                                <span data-lang-key="expenses">Expenses</span>
                            </a>
                        </li>
                        <li class="nav-item mb-2">
                            <a href="#reports" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer" data-page="reports">
                                <i class="fas fa-chart-pie"></i>
                                <span data-lang-key="reports">Reports</span>
                            </a>
                        </li>
                        <li class="nav-item mb-2">
                            <a href="#budgets" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer" data-page="budgets">
                                <i class="fas fa-piggy-bank"></i>
                                <span data-lang-key="budgets">Budgets</span>
                            </a>
                        </li>
                        <li class="nav-item mb-2">
                            <a href="#settings" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer" data-page="settings">
                                <i class="fas fa-cog"></i>
                                <span data-lang-key="settings">Settings</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
            
            <!-- Dark Mode and Language Switcher -->
            <div class="mt-8">
                <div class="flex items-center justify-between mb-4 p-2 rounded-lg bg-gray-100 dark:bg-gray-700">
                    <span data-lang-key="darkMode">Dark Mode</span>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" value="" class="sr-only peer" id="darkModeToggle">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-[--primary]"></div>
                    </label>
                </div>
                <div class="flex items-center justify-between p-2 rounded-lg bg-gray-100 dark:bg-gray-700">
                    <span data-lang-key="language">Language</span>
                    <select id="language-switcher" class="bg-transparent text-sm rounded-lg border-none focus:ring-0 focus:outline-none">
                        <option value="en">English</option>
                        <option value="hi">हिंदी</option>
                        <option value="te">తెలుగు</option>
                        <option value="ta">தமிழ்</option>
                        <option value="bn">বাংলা</option>
                    </select>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 p-6 transition-transform duration-300">
            <!-- Loading and Message Modals -->
            <div id="loading-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50 hidden">
                <div class="flex flex-col items-center p-6 rounded-lg bg-[--card-color] text-[--text-color]">
                    <i class="fas fa-spinner animate-spin text-3xl text-[--primary] mb-4"></i>
                    <p data-lang-key="loading">Loading...</p>
                </div>
            </div>

            <div id="message-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50 hidden">
                <div class="bg-[--card-color] text-[--text-color] p-6 rounded-lg shadow-xl w-80">
                    <h3 id="modal-title" class="font-bold text-xl mb-4"></h3>
                    <p id="modal-message" class="text-sm text-[--text-secondary] mb-6"></p>
                    <div class="flex justify-end space-x-2">
                        <button id="modal-confirm-btn" class="bg-[--primary] text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors hidden" data-lang-key="confirm">Confirm</button>
                        <button id="modal-close-btn" class="bg-gray-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-gray-600 transition-colors" data-lang-key="close">Close</button>
                    </div>
                </div>
            </div>

            <section id="dashboard" class="page active">
                <h2 class="text-3xl font-bold mb-6 text-[--primary]" data-lang-key="dashboardTitle">Dashboard Overview</h2>
                
                <!-- Summary Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-[--card-color] p-6 rounded-lg shadow-md hover:scale-105 transition-transform" data-lang-key="revenueCard">
                        <h3 class="text-lg font-semibold text-[--text-secondary] mb-2">Revenue</h3>
                        <p id="totalRevenue" class="text-3xl font-bold text-[--positive]">₹0.00</p>
                    </div>
                    <div class="bg-[--card-color] p-6 rounded-lg shadow-md hover:scale-105 transition-transform" data-lang-key="expensesCard">
                        <h3 class="text-lg font-semibold text-[--text-secondary] mb-2">Expenses</h3>
                        <p id="totalExpenses" class="text-3xl font-bold text-[--negative]">₹0.00</p>
                    </div>
                    <div class="bg-[--card-color] p-6 rounded-lg shadow-md hover:scale-105 transition-transform" data-lang-key="profitCard">
                        <h3 class="text-lg font-semibold text-[--text-secondary] mb-2">Profit / Loss</h3>
                        <p id="profitOrLoss" class="text-3xl font-bold">₹0.00</p>
                    </div>
                    <div class="bg-[--card-color] p-6 rounded-lg shadow-md hover:scale-105 transition-transform" data-lang-key="cashFlowCard">
                        <h3 class="text-lg font-semibold text-[--text-secondary] mb-2">Cash Flow</h3>
                        <p id="cashFlow" class="text-3xl font-bold">₹0.00</p>
                    </div>
                </div>

                <!-- Charts -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-[--card-color] p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold mb-4" data-lang-key="revenueGrowthChart">Revenue & Expenses Growth</h3>
                        <canvas id="revenueExpensesChart"></canvas>
                    </div>
                    <div class="bg-[--card-color] p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold mb-4" data-lang-key="expenseBreakdownChart">Expense Breakdown by Category</h3>
                        <canvas id="expensePieChart"></canvas>
                    </div>
                </div>
            </section>
            
            <section id="income" class="page hidden">
                <h2 class="text-3xl font-bold mb-6 text-[--primary]" data-lang-key="incomeTitle">Income Management</h2>
                <div class="bg-[--card-color] p-6 rounded-lg shadow-md">
                    <form id="income-form" class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <input type="text" id="incomeDescription" placeholder="Description" required class="p-3 rounded-lg border border-[--border-color] bg-transparent focus:outline-none focus:ring-2 focus:ring-[--primary]">
                        <input type="number" id="incomeAmount" placeholder="Amount" required class="p-3 rounded-lg border border-[--border-color] bg-transparent focus:outline-none focus:ring-2 focus:ring-[--primary]">
                        <select id="incomeCategory" class="p-3 rounded-lg border border-[--border-color] bg-transparent focus:outline-none focus:ring-2 focus:ring-[--primary]">
                            <option value="sales" data-lang-key="sales">Sales</option>
                            <option value="services" data-lang-key="services">Services</option>
                            <option value="investments" data-lang-key="investments">Investments</option>
                            <option value="funding" data-lang-key="funding">Funding</option>
                        </select>
                        <button type="submit" class="bg-[--positive] text-white p-3 rounded-lg font-semibold hover:bg-green-700 transition-colors" data-lang-key="addIncome">Add Income</button>
                    </form>
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-[--card-color] rounded-lg">
                            <thead>
                                <tr class="bg-gray-50 dark:bg-gray-800 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                    <th class="py-3 px-4" data-lang-key="tableDate">Date</th>
                                    <th class="py-3 px-4" data-lang-key="tableDescription">Description</th>
                                    <th class="py-3 px-4" data-lang-key="tableCategory">Category</th>
                                    <th class="py-3 px-4" data-lang-key="tableAmount">Amount</th>
                                    <th class="py-3 px-4" data-lang-key="tableActions">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="income-table-body" class="divide-y divide-[--border-color]">
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <section id="expenses" class="page hidden">
                <h2 class="text-3xl font-bold mb-6 text-[--primary]" data-lang-key="expensesTitle">Expense Tracking</h2>
                <div class="bg-[--card-color] p-6 rounded-lg shadow-md">
                    <form id="expense-form" class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <input type="text" id="expenseDescription" placeholder="Description" required class="p-3 rounded-lg border border-[--border-color] bg-transparent focus:outline-none focus:ring-2 focus:ring-[--primary]">
                        <input type="number" id="expenseAmount" placeholder="Amount" required class="p-3 rounded-lg border border-[--border-color] bg-transparent focus:outline-none focus:ring-2 focus:ring-[--primary]">
                        <select id="expenseCategory" class="p-3 rounded-lg border border-[--border-color] bg-transparent focus:outline-none focus:ring-2 focus:ring-[--primary]">
                            <option value="operations" data-lang-key="operations">Operations</option>
                            <option value="payroll" data-lang-key="payroll">Payroll</option>
                            <option value="marketing" data-lang-key="marketing">Marketing</option>
                            <option value="utilities" data-lang-key="utilities">Utilities</option>
                            <option value="materials" data-lang-key="materials">Raw Materials</option>
                            <option value="other" data-lang-key="other">Other</option>
                        </select>
                        <button type="submit" class="bg-[--negative] text-white p-3 rounded-lg font-semibold hover:bg-red-700 transition-colors" data-lang-key="addExpense">Add Expense</button>
                    </form>
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-[--card-color] rounded-lg">
                            <thead>
                                <tr class="bg-gray-50 dark:bg-gray-800 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                    <th class="py-3 px-4" data-lang-key="tableDate">Date</th>
                                    <th class="py-3 px-4" data-lang-key="tableDescription">Description</th>
                                    <th class="py-3 px-4" data-lang-key="tableCategory">Category</th>
                                    <th class="py-3 px-4" data-lang-key="tableAmount">Amount</th>
                                    <th class="py-3 px-4" data-lang-key="tableActions">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="expense-table-body" class="divide-y divide-[--border-color]">
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <section id="reports" class="page hidden">
                <h2 class="text-3xl font-bold mb-6 text-[--primary]" data-lang-key="reportsTitle">Reports & Analytics</h2>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <div class="bg-[--card-color] p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold mb-4" data-lang-key="monthlyReport">Monthly Report</h3>
                        <canvas id="monthlyReportChart"></canvas>
                    </div>
                    <div class="bg-[--card-color] p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold mb-4" data-lang-key="quarterlyReport">Quarterly Report</h3>
                        <canvas id="quarterlyReportChart"></canvas>
                    </div>
                </div>
                <div class="bg-[--card-color] p-6 rounded-lg shadow-md flex justify-end space-x-4">
                    <button id="exportCsvBtn" class="bg-gray-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-gray-600 transition-colors" data-lang-key="exportCsv">Export as CSV</button>
                    <button id="downloadPdfBtn" class="bg-[--primary] text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors" data-lang-key="downloadPdf">Download Statement</button>
                </div>
            </section>
            
            <section id="budgets" class="page hidden">
                <h2 class="text-3xl font-bold mb-6 text-[--primary]" data-lang-key="budgetsTitle">Budget Goals & Alerts</h2>
                <div class="bg-[--card-color] p-6 rounded-lg shadow-md">
                    <form id="budget-form" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <select id="budgetCategory" class="p-3 rounded-lg border border-[--border-color] bg-transparent focus:outline-none focus:ring-2 focus:ring-[--primary]">
                            <option value="operations" data-lang-key="operations">Operations</option>
                            <option value="payroll" data-lang-key="payroll">Payroll</option>
                            <option value="marketing" data-lang-key="marketing">Marketing</option>
                            <option value="utilities" data-lang-key="utilities">Utilities</option>
                            <option value="materials" data-lang-key="materials">Raw Materials</option>
                            <option value="other" data-lang-key="other">Other</option>
                        </select>
                        <input type="number" id="budgetAmount" placeholder="Budget Amount" required class="p-3 rounded-lg border bor